{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-service.js","../src/main.js"],"sourcesContent":["'use strict';\nimport axios from 'axios';\n\nconst API_KEY = '44510981-dcecc8b47662a7959e520ee44';\nconst BASE_URL = 'https://pixabay.com/api/';\nconst MAX_KEYWORD_LENGTH = 100;\n\nasync function getImagesByKeyword(searchString) {\n  if (searchString.length > MAX_KEYWORD_LENGTH) {\n    throw new Error('Keyword is too long');\n  }\n\n  if (!searchString) {\n    throw new Error('Keyword is required');\n  }\n\n  const keywords = searchString.trim().split(/\\s+/);\n  const searchQuery = keywords.join('+');\n  return axios\n    .get(\n      `${BASE_URL}?key=${API_KEY}&q=${searchQuery}&image_type=photo&orientation=horizontal&safesearch=true&per_page=40`\n    )\n    .then(({ data }) => data);\n}\n\nexport { getImagesByKeyword };\n","'use strict';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { getImagesByKeyword } from './js/pixabay-service';\n\nconst elements = {\n  gallery: document.querySelector('.gallery'),\n  form: document.querySelector('#search-form'),\n};\nconst lightbox = new SimpleLightbox('.gallery a', {});\nelements.form.addEventListener('submit', onSearch);\n\nasync function onSearch(event) {\n  event.preventDefault();\n  elements.gallery.innerHTML = '';\n  const query = elements.form.elements.searchQuery.value;\n  try {\n    const response = await getImagesByKeyword(query);\n    const images = response.hits;\n    if (images.length === 0) {\n      iziToast.error({\n        title: 'Error',\n        message:\n          'Sorry, there are no images matching your search query. Please try again.',\n        position: 'topRight',\n      });\n    } else {\n      console.log(response);\n      iziToast.success({\n        title: 'Success',\n        message: `Hooray! We found ${response.totalHits} images.`,\n        position: 'topRight',\n      });\n      renderImages(images);\n    }\n  } catch (error) {\n    iziToast.error({\n      title: 'Error',\n      message: error.message,\n      position: 'topRight',\n    });\n  } finally {\n    elements.form.reset();\n  }\n}\n\nfunction renderImages(images) {\n    const photoCards = images\n    .map(image => {\n        return `<a href=\"${image.largeImageURL}\">\n        <div class=\"photo-card\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\"/>\n        <div class=\"info\">\n        <p class=\"info-item\">\n        <b>Likes</b>\n        ${image.likes}\n        </p>\n        <p class=\"info-item\">\n        <b>Views</b>\n        ${image.views}\n        </p>\n        <p class=\"info-item\">\n        <b>Comments</b>\n        ${image.comments}\n        </p>\n        <p class=\"info-item\">\n        <b>Downloads</b>\n        ${image.downloads}\n        </p>\n        </div>\n        </div>\n        </a>`;\n    })\n    .map(card => `<li class=\"gallery-item\">${card}</li>`)\n    .join('');\n    elements.gallery.insertAdjacentHTML('beforeend', `<ul class=\"gallery-container\">${photoCards}</ul>`);\n    lightbox.refresh();\n}\n"],"names":["API_KEY","BASE_URL","MAX_KEYWORD_LENGTH","getImagesByKeyword","searchString","searchQuery","axios","data","elements","lightbox","SimpleLightbox","onSearch","event","query","response","images","iziToast","renderImages","error","photoCards","image","card"],"mappings":"owBAGA,MAAMA,EAAU,qCACVC,EAAW,2BACXC,EAAqB,IAE3B,eAAeC,EAAmBC,EAAc,CAC9C,GAAIA,EAAa,OAASF,EACxB,MAAM,IAAI,MAAM,qBAAqB,EAGvC,GAAI,CAACE,EACH,MAAM,IAAI,MAAM,qBAAqB,EAIvC,MAAMC,EADWD,EAAa,KAAM,EAAC,MAAM,KAAK,EACnB,KAAK,GAAG,EACrC,OAAOE,EACJ,IACC,GAAGL,CAAQ,QAAQD,CAAO,MAAMK,CAAW,sEAC5C,EACA,KAAK,CAAC,CAAE,KAAAE,CAAM,IAAKA,CAAI,CAC5B,CCfA,MAAMC,EAAW,CACf,QAAS,SAAS,cAAc,UAAU,EAC1C,KAAM,SAAS,cAAc,cAAc,CAC7C,EACMC,EAAW,IAAIC,EAAe,aAAc,CAAE,CAAA,EACpDF,EAAS,KAAK,iBAAiB,SAAUG,CAAQ,EAEjD,eAAeA,EAASC,EAAO,CAC7BA,EAAM,eAAc,EACpBJ,EAAS,QAAQ,UAAY,GAC7B,MAAMK,EAAQL,EAAS,KAAK,SAAS,YAAY,MACjD,GAAI,CACF,MAAMM,EAAW,MAAMX,EAAmBU,CAAK,EACzCE,EAASD,EAAS,KACpBC,EAAO,SAAW,EACpBC,EAAS,MAAM,CACb,MAAO,QACP,QACE,2EACF,SAAU,UAClB,CAAO,GAED,QAAQ,IAAIF,CAAQ,EACpBE,EAAS,QAAQ,CACf,MAAO,UACP,QAAS,oBAAoBF,EAAS,SAAS,WAC/C,SAAU,UAClB,CAAO,EACDG,EAAaF,CAAM,EAEtB,OAAQG,EAAO,CACdF,EAAS,MAAM,CACb,MAAO,QACP,QAASE,EAAM,QACf,SAAU,UAChB,CAAK,CACL,QAAY,CACRV,EAAS,KAAK,OACf,CACH,CAEA,SAASS,EAAaF,EAAQ,CAC1B,MAAMI,EAAaJ,EAClB,IAAIK,GACM,YAAYA,EAAM,aAAa;AAAA;AAAA,oBAE1BA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA;AAAA;AAAA,UAIhDA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,UAIXA,EAAM,KAAK;AAAA;AAAA;AAAA;AAAA,UAIXA,EAAM,QAAQ;AAAA;AAAA;AAAA;AAAA,UAIdA,EAAM,SAAS;AAAA;AAAA;AAAA;AAAA,aAKpB,EACA,IAAIC,GAAQ,4BAA4BA,CAAI,OAAO,EACnD,KAAK,EAAE,EACRb,EAAS,QAAQ,mBAAmB,YAAa,iCAAiCW,CAAU,OAAO,EACnGV,EAAS,QAAO,CACpB"}